#!/bin/bash


MALWARE_DIR="parsed_malware_slow_method"

alg=$1
window=$2
RESULTS_DIR="results_win${window}_sg${alg}"



### SETUP ###

# create results directory if it does not exist
[[ -d ${RESULTS_DIR} ]] || mkdir ${RESULTS_DIR}



### RUN TESTS ###

# running classification
echo "Removing Bad Parsed Malware"
./preprocess_parsed_malwares.sh

echo "Measuring Distances"
python test_gensim_k_nn.py $alg $window    # 这一步消耗的时间非常长，有4、5天

echo "Running K-NN Classifications"
python test_k_nn.py $alg $window

# parse results
./parse_results.sh ${RESULTS_DIR}


# confusion matrix compute
python confusion_matrix.py $alg $window

