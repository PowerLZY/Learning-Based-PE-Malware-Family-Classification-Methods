# 将所有color-image图片，对应 trainLabels.csv 分到 label 对应的文件夹中
#!/usr/bin/env python
# encoding: utf-8

import csv

import random, glob
from shutil import copyfile, copy
import matplotlib.pyplot as plt
import matplotlib.image as mpimg
import matplotlib as mpl
import os
import re
import numpy as np
import pandas as pd
from PIL import Image
from skimage import img_as_ubyte
import cv2

input_dir = "/data/cgh/MS_DATA/train/"  # 图像读取地址
output_dir = "malware_by_class/"  # 图像保存地址



with open('/home/mayixuan/bytes-based/trainLabels.csv', 'r') as f:
    reader = csv.reader(f)
    name = [row[0] for row in reader]   #csv文件第一列,文件名
    f.close()

with open('/home/mayixuan/bytes-based/trainLabels.csv', 'r') as f:
    reader = csv.reader(f)
    label = [row[1] for row in reader]  #csv文件第二列，标签1.2.3.4....9



# 读取 RGB-image 文件夹下每个文件，查看其对应的标签，然后保存到 14-family 相应的家族文件夹中
files = os.listdir(input_dir)
fileNum = 0
for filename in files:
    fileNum = fileNum + 1
    check_name = os.path.splitext(os.path.basename(filename))[0]
    i = 0
    for i in range(0,len(name)): #如果这个图片和csv中某个名字对应，则将其保存到标签对应文件夹
        if (check_name == name[i]):
#           print("两者相同 ",check_name,name[i],label[i])
            copy(input_dir + check_name + '.asm', output_dir + str(label[i]) + '/')
            print(check_name)
            break
#   print(fileNum, filename,"文件夹：",label[i])






print('done')
print("Process %d image" %(fileNum))